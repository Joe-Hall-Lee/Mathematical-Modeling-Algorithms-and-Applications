I = imread('cameraman.tif'); % cameraman.tif 是 Matlab 自带的图像文件
I = im2double(I); % 数据转换成 double 类型
T = dctmtx(8); % T 为 8 × 8 的 DCT 变换矩阵
% 定义正 DCT 变换的匿名函数，这里 block_struct 是 Matlab 内置的结构变量
dct = @(block_struct) T * block_struct.data * T';
B = blockproc(I, [8, 8], dct); % 做正 DCT 变换
mask = [1, 1, 1, 1, 0, 0, 0, 0; ...
    1, 1, 1, 0, 0, 0, 0, 0; ...
    1, 1, 0, 0, 0, 0, 0, 0; ...
    1, 0, 0, 0, 0, 0, 0, 0; ...
    0, 0, 0, 0, 0, 0, 0, 0; ...
    0, 0, 0, 0, 0, 0, 0, 0; ...
    0, 0, 0, 0, 0, 0, 0, 0; ...
    0, 0, 0, 0, 0, 0, 0, 0]; % 给出掩膜矩阵
% 提取低频系数
B2 = blockproc(B, [8, 8], @(block_struct) mask.*block_struct.data);
% 定义逆 DCT 变换的隐函数
invdct = @(block_struct) T' * block_struct.data * T;
I2 = blockproc(B2, [8, 8], invdct); % 做逆 DCT 变换
subplot(1, 2, 1), imshow(I) % 显示原图像
subplot(1, 2, 2), imshow(I2) % 显示变换后的图像