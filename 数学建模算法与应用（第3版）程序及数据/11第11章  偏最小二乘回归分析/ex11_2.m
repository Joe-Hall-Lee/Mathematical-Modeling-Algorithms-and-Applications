clc, clear, format long g  % 长小数的显示方式
ab0=load('data11_2.txt');
mu=mean(ab0);sig=std(ab0); % 求均值和标准差
ab=zscore(ab0); % 数据标准化
a=ab(:,[1:7]); b=ab(:,[8:end]);
ncomp=2; % 试着选择成分的对数
[XL,YL,XS,YS,BETA,PCTVAR,MSE,stats]=plsregress(a,b,ncomp)
contr=cumsum(PCTVAR,2) % 求累积贡献率
n=size(a,2); m=size(b,2); % n 是自变量的个数，m 是因变量的个数
% 原始数据回归方程的常数项
BETA2(1,:)=mu(n+1:end)-mu(1:n)./sig(1:n)*BETA([2:end],:).*sig(n+1:end); 
% 计算原始变量 x1, …, xn的系数，每一列是一个回归方程
BETA2([2:n+1],:)=(1./sig(1:n))'*sig(n+1:end).*BETA([2:end],:) 
format  % 恢复到短小数的显示方式